{"ast":null,"code":"var _jsxFileName = \"/home/hs/react-practice/src/App.tsx\",\n  _s = $RefreshSig$();\nimport \"./App.css\";\nimport { useEffect, useState } from \"react\";\nimport apiClient, { CanceledError } from \"./services/api-client\";\nimport userService from \"./services/user-service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [error, setError] = useState(\"\");\n  const [users, setUsers] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    const controller = new AbortController();\n    setIsLoading(true);\n    const {\n      request,\n      cancel\n    } = userService.getAllUsers;\n    apiClient.get(\"/users\", {\n      signal: controller.signal\n    }).then(res => {\n      setUsers(res.data);\n      // console.log(res.data)\n      setIsLoading(false);\n    }).catch(err => {\n      if (err instanceof CanceledError) return;\n      setError(err.message);\n      setIsLoading(false);\n    });\n    return () => controller.abort();\n  }, []);\n  // delete user using Optimistic method\n  const handleUser = user => {\n    const originalUser = [...users];\n    setUsers(users.filter(u => u.id !== user.id));\n    apiClient.delete(\"/users/\" + user.id).catch(err => {\n      setError(err.message);\n      setUsers(originalUser);\n    });\n  };\n  const newUser = {\n    id: 0,\n    name: \"Hayat\"\n  };\n  // add user using Optimistic method\n  const handleAdd = () => {\n    const originalUser = [...users];\n    setUsers([newUser, ...users]);\n    apiClient.post(\"/users\", newUser).then(response => {\n      setUsers([response.data, ...users]);\n    }).catch(err => {\n      setError(err.message);\n      setUsers(originalUser);\n    });\n  };\n  // update user using Optimistic method\n  const handleUpdate = user => {\n    const originalUser = [...users];\n    const userUpdated = {\n      ...user,\n      name: user.name + \"!\"\n    };\n    setUsers(users.map(u => u.id === user.id ? userUpdated : u));\n    apiClient.patch(\"/users/\" + user.id, userUpdated).catch(err => {\n      setError(err.message);\n      setUsers(originalUser);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center ml-10 text-green-600\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-600 text\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAdd,\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this), users.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          paddingBottom: \"5px\"\n        },\n        children: [user.name, /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginRight: \"5px\"\n            },\n            onClick: () => handleUpdate(user),\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginRight: \"5px\"\n            },\n            onClick: () => handleUser(user),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }, this)]\n      }, user.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 6\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"iB70K7NGkgN7lIiXk6byVFXRLQg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","apiClient","CanceledError","userService","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","error","setError","users","setUsers","isLoading","setIsLoading","controller","AbortController","request","cancel","getAllUsers","get","signal","then","res","data","catch","err","message","abort","handleUser","user","originalUser","filter","u","id","delete","newUser","name","handleAdd","post","response","handleUpdate","userUpdated","map","patch","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","display","justifyContent","paddingBottom","marginRight","_c","$RefreshReg$"],"sources":["/home/hs/react-practice/src/App.tsx"],"sourcesContent":["import \"./App.css\";\nimport { useEffect, useState } from \"react\";\nimport apiClient, { CanceledError, AxiosError } from \"./services/api-client\";\nimport userService from \"./services/user-service\";\n\ninterface User {\n\tid: number;\n\tname: string;\n}\n\nfunction App() {\n\tconst [error, setError] = useState(\"\");\n\tconst [users, setUsers] = useState<User[]>([]);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst controller = new AbortController();\n\t\tsetIsLoading(true);\n\n\t\tconst {request, cancel} = userService.getAllUsers\n\t\tapiClient\n\t\t\t.get<User[]>(\"/users\", { signal: controller.signal })\n\t\t\t.then((res) => {\n\t\t\t\tsetUsers(res.data)\n\t\t\t\t// console.log(res.data)\n\t\t\t\tsetIsLoading(false);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (err instanceof CanceledError) return;\n\t\t\t\tsetError((err as AxiosError).message);\n\t\t\t\tsetIsLoading(false);\n\t\t\t});\n\n\t\treturn () => controller.abort();\n\t}, []);\n\t// delete user using Optimistic method\n\tconst handleUser = (user: User) => {\n\t\tconst originalUser = [...users];\n\t\tsetUsers(users.filter((u) => u.id !== user.id));\n\n\t\tapiClient.delete(\"/users/\" + user.id).catch((err) => {\n\t\t\tsetError((err as AxiosError).message);\n\t\t\tsetUsers(originalUser);\n\t\t});\n\t};\n\tconst newUser = {\n\t\tid: 0,\n\t\tname: \"Hayat\",\n\t};\n\t// add user using Optimistic method\n\tconst handleAdd = () => {\n\t\tconst originalUser = [...users];\n\t\tsetUsers([newUser, ...users]);\n\n\t\tapiClient\n\t\t\t.post(\"/users\", newUser)\n\t\t\t.then((response) => {\n\t\t\t\tsetUsers([response.data, ...users]);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetError((err as AxiosError).message);\n\t\t\t\tsetUsers(originalUser);\n\t\t\t});\n\t};\n\t// update user using Optimistic method\n\tconst handleUpdate = (user: User) => {\n\t\tconst originalUser = [...users];\n\t\tconst userUpdated = { ...user, name: user.name + \"!\" };\n\t\tsetUsers(users.map((u) => (u.id === user.id ? userUpdated : u)));\n\n\t\tapiClient.patch(\"/users/\" + user.id, userUpdated).catch((err) => {\n\t\t\tsetError((err as AxiosError).message);\n\t\t\tsetUsers(originalUser);\n\t\t});\n\t};\n\treturn (\n\t\t<>\n\t\t\t{isLoading && (\n\t\t\t\t<p className=\"text-center ml-10 text-green-600\">Loading...</p>\n\t\t\t)}\n\t\t\t{error && <p className=\"text-red-600 text\">{error}</p>}\n\n\t\t\t<ul>\n\t\t\t\t<button onClick={handleAdd}>Add</button>\n\t\t\t\t{users.map((user) => (\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey={user.id}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\n\t\t\t\t\t\t\tpaddingBottom: \"5px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{user.name}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tstyle={{ marginRight: \"5px\" }}\n\t\t\t\t\t\t\t\tonClick={() => handleUpdate(user)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tstyle={{ marginRight: \"5px\" }}\n\t\t\t\t\t\t\t\tonClick={() => handleUser(user)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</>\n\t);\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}